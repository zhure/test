"use strict";(self["webpackChunkstray_animal_rescue_system"]=self["webpackChunkstray_animal_rescue_system"]||[]).push([[407],{3407:function(e,s,r){r.r(s),r.d(s,{default:function(){return y}});var l=r(6252),o=r(3709);const t=e=>((0,l.dD)("data-v-7934243f"),e=e(),(0,l.Cn)(),e),u=t((()=>(0,l._)("div",null,[(0,l._)("img",{class:"background",src:o,alt:"background"})],-1))),a={class:"login_box"},m=t((()=>(0,l._)("span",{style:{color:"#49657e",size:"A3","margin-left":"10px","margin-right":"10px"}},"用户类型：",-1))),n=t((()=>(0,l._)("span",{style:{"margin-left":"110px",color:"#ffffff",size:"unset"}},"还没有账号？",-1))),i=(0,l.Uk)("点此注册"),d=(0,l.Uk)("登 录");function p(e,s,r,o,t,p){const f=(0,l.up)("el-input"),c=(0,l.up)("el-form-item"),g=(0,l.up)("el-option"),h=(0,l.up)("el-select"),w=(0,l.up)("el-button"),y=(0,l.up)("el-form"),_=(0,l.up)("Register");return(0,l.wg)(),(0,l.iD)("div",null,[u,(0,l._)("div",a,[(0,l.Wm)(y,{ref:"form",model:t.form,size:"mini",rules:t.rules},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{prop:"username"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{"prefix-icon":"user",placeholder:"用户名",modelValue:t.form.username,"onUpdate:modelValue":s[0]||(s[0]=e=>t.form.username=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(c,{prop:"password"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{"prefix-icon":"lock",placeholder:"密码",modelValue:t.form.password,"onUpdate:modelValue":s[1]||(s[1]=e=>t.form.password=e),"show-password":""},null,8,["modelValue"])])),_:1}),(0,l.Wm)(c,{label:"",prop:"userType"},{default:(0,l.w5)((()=>[m,(0,l.Wm)(h,{modelValue:t.form.userType,"onUpdate:modelValue":s[2]||(s[2]=e=>t.form.userType=e),placeholder:"请选择用户类型",style:{width:"65%"}},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{label:"普通用户",value:"1"}),(0,l.Wm)(g,{label:"医疗人员",value:"2"})])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[n,(0,l.Wm)(w,{style:{"margin-left":"10px"},size:"mini",type:"text",onClick:s[3]||(s[3]=e=>t.registerShow=!0)},{default:(0,l.w5)((()=>[i])),_:1})])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,{style:{width:"100%","background-color":"rgba(57,139,246,0.52)"},type:"primary",onClick:p.login},{default:(0,l.w5)((()=>[d])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])]),(0,l._)("div",null,[t.registerShow?((0,l.wg)(),(0,l.j4)(_,{key:0,onClose:p.close},null,8,["onClose"])):(0,l.kq)("",!0)])])}var f=r(8447),c=r(4471),g=(r(2269),{name:"UserLogin",components:{Register:f.Z},setup(){const e=()=>{let e=document.documentElement.clientWidth,s=e/1536;document.body.style.zoom=s};(0,l.bv)((()=>{e(),window.onresize=()=>(()=>{e()})()}))},data(){return{form:{username:"",password:"",userType:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},registerShow:!1}},methods:{login(){let e=this;this.$refs["form"].validate((s=>{s&&c.Z.post("/user/login",{username:this.form.username,password:this.form.password,userType:this.form.userType}).then((s=>{"0"===s.code?(this.$message({type:"success",message:"登陆成功"}),c.Z.get("/user/"+e.form.username).then((s=>{e.$store.commit("login",s.data)})),"1"===e.form.userType?this.$router.push("/"):this.$router.push("/im")):this.$message({type:"error",message:s.msg})}))}))},close(e){this.registerShow=e}}}),h=r(3744);const w=(0,h.Z)(g,[["render",p],["__scopeId","data-v-7934243f"]]);var y=w}}]);
//# sourceMappingURL=407.2ff6930c.js.map