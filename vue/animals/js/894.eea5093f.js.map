{"version":3,"file":"js/894.eea5093f.js","mappings":"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","sources":["webpack://stray-animal-rescue-system/./src/views/admin/examine/AnimalAudit.vue","webpack://stray-animal-rescue-system/./src/views/admin/examine/AnimalAudit.vue?1a45"],"sourcesContent":["<template>\r\n  <div style=\"padding: 10px;\">\r\n    <el-row>\r\n      <el-col :span=\"19\">\r\n        <div v-if=\"animal.id === undefined\" style=\"margin: 10px 0\">暂未有用户请求添加</div>\r\n        <div v-if=\"animal.id !== undefined\" style=\"margin: 10px 0\">\r\n          <span>用户请求添加：</span>\r\n          <span style=\"margin: 0 50px 0 10px; font-size: 18px; color: #99a9bf\">{{ animal.type }}</span>\r\n          <el-popconfirm title=\"通过后以下帖子也将通过？\" @confirm=\"approved\">\r\n            <template #reference>\r\n              <el-button type=\"success\" :icon=\"Check\" size=\"normal\" plain></el-button>\r\n            </template>\r\n          </el-popconfirm>\r\n          <el-popconfirm title=\"确定不通过？将被删除，相应帖子将被删除\" @confirm=\"fail\">\r\n            <template #reference>\r\n              <el-button type=\"danger\" :icon=\"Close\" size=\"normal\" plain></el-button>\r\n            </template>\r\n          </el-popconfirm>\r\n<!--          <el-button type=\"success\" :icon=\"Check\" size=\"normal\" plain @click=\"approved\"></el-button>-->\r\n<!--          <el-button type=\"danger\" :icon=\"Close\" size=\"normal\" plain @click=\"fail\"></el-button>-->\r\n        </div>\r\n      </el-col>\r\n      <el-col :span=\"5\">\r\n        <div style=\"margin: 10px 0;\">\r\n          <el-input v-model=\"newAnimal.type\" placeholder=\"请输入动物种类\" style=\"width: 70%\" clearable></el-input>\r\n          <el-popconfirm title=\"确定要新增动物种类？\" @confirm=\"submit\">\r\n            <template #reference>\r\n              <el-button style=\"margin-left: 5px\" type=\"primary\">新增</el-button>\r\n            </template>\r\n          </el-popconfirm>\r\n          <!--      <el-button type=\"primary\" @click=\"submit\">新增</el-button>-->\r\n        </div>\r\n      </el-col>\r\n    </el-row>\r\n    <el-card class=\"detail\" shadow=\"never\" v-for=\"(post, index) in posts\">\r\n      <div v-if=\"index === num\">\r\n        <el-row>\r\n          <el-col :span=\"19\">\r\n            <div v-if=\"num === postLen-1\">\r\n              <el-button disabled>到底了</el-button>\r\n            </div>\r\n            <div v-if=\"num !== postLen-1\">\r\n              <el-button @click=\"next\">下一条</el-button>\r\n            </div>\r\n          </el-col>\r\n          <el-col :span=\"5\">\r\n            <el-popconfirm title=\"确定不通过？将被删除\" @confirm=\"delete_post(post.id)\">\r\n              <template #reference>\r\n                <el-button type=\"danger\" :icon=\"Close\" size=\"small\" plain></el-button>\r\n              </template>\r\n            </el-popconfirm>\r\n          </el-col>\r\n        </el-row>\r\n        <div style=\"display: block; padding: 20px\">\r\n          <span class=\"title\">{{ post.title }}</span>\r\n        </div>\r\n        <el-row>\r\n          <el-col :span=\"1\" :offset=\"1\">\r\n            <img class=\"avatar\" :src=\"post.user['headImg']\" alt=\"头像\">\r\n          </el-col>\r\n          <el-col :span=\"21\">\r\n            <div style=\"margin-left: 10px\">\r\n              <span class=\"nick\">{{ post.user['nickName'] }}</span>\r\n              <span class=\"time\">{{ post.time }}</span>\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n        <div style=\"margin: 25px\" v-html=\"post.content\"></div>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request\";\r\n\r\nexport default {\r\n  name: \"AnimalAudit\",\r\n  data() {\r\n    return {\r\n      animal: {},\r\n      posts: [],\r\n      postLen: 0,\r\n      num: 0,\r\n      newAnimal: {},\r\n      Check: 'Check',\r\n      Close: 'Close',\r\n    }\r\n  },\r\n  created() {\r\n    this.load()\r\n  },\r\n  methods: {\r\n    async load() {\r\n      // this.num = 0\r\n      // this.animal = {}\r\n      // this.postLen = 0\r\n      await request.get('/animal', {\r\n        params: {\r\n          isPass: 0\r\n        }\r\n      }).then(res => {\r\n        // this.animals = res.data\r\n        if(res.data.length > 0) {\r\n          this.animal = res.data[0]\r\n          // console.log(res)\r\n        }\r\n      })\r\n      // console.log(this.animal.id)\r\n      if(this.animal.id === undefined)\r\n        return\r\n      await request.get('/post/animal/' + this.animal.id).then(res => {\r\n        // console.log(res)\r\n        this.posts = res.data\r\n        this.postLen = res.data.length\r\n      })\r\n    },\r\n    submit() {\r\n      this.newAnimal.isPass = 1\r\n      request.post('/animal', this.newAnimal).then(res => {\r\n        if (res.code === '0') {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"添加成功\"\r\n          })\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: res.msg\r\n          })\r\n        }\r\n      })\r\n    },\r\n    async approved() {\r\n      for (const post of this.posts) {\r\n        let p = post\r\n        p.isPass = 1\r\n        await request.put('/post', p)\r\n      }\r\n      this.animal.isPass = 1\r\n      await request.put('/animal', this.animal).then(res => {\r\n        if (res.code === '0') {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"审核成功\"\r\n          })\r\n          this.animal={}\r\n          this.posts=[]\r\n          this.postLen=0\r\n          this.load()\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: res.msg\r\n          })\r\n        }\r\n      })\r\n    },\r\n    async fail() {\r\n      for (const post of this.posts) {\r\n        await request.delete('/post/' + post.id)\r\n      }\r\n      await request.delete('/animal/' + this.animal.id).then(res => {\r\n        if (res.code === '0') {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"审核成功\"\r\n          })\r\n          this.posts=[]\r\n          this.postLen=0\r\n          this.animal = {}\r\n          this.load()\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: res.msg\r\n          })\r\n        }\r\n      })\r\n    },\r\n    next() {\r\n      this.num ++\r\n    },\r\n    delete_post(id) {\r\n      request.delete('/post/' + id).then(res => {\r\n        if (res.code === '0') {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"删除成功\"\r\n          })\r\n          this.load()\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: res.msg\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.avatar {\r\n  height: 51px;\r\n  width: 51px;\r\n  border-radius: 50%;\r\n  box-shadow: rgba(52, 94, 131, 0.52) 0 0 3px;\r\n}\r\n.nick {\r\n  padding: 5px;\r\n  font-size: 18px;\r\n  display: block;\r\n  cursor: pointer;\r\n}\r\n.time {\r\n  font-size: 12px;\r\n  display: block;\r\n  color: #999999;\r\n>span{\r\n  cursor: pointer;\r\n  margin-left: 3px;\r\n}\r\n>span:hover {\r\n  color: #e3b48c;\r\n}\r\n}\r\n.title {\r\n  margin-left: 20px;\r\n  font-size: 28px;\r\n}\r\n</style>","import { render } from \"./AnimalAudit.vue?vue&type=template&id=7d0fff6b&scoped=true\"\nimport script from \"./AnimalAudit.vue?vue&type=script&lang=js\"\nexport * from \"./AnimalAudit.vue?vue&type=script&lang=js\"\n\nimport \"./AnimalAudit.vue?vue&type=style&index=0&id=7d0fff6b&lang=less&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\竹诺\\\\Desktop\\\\springboot+vue框架\\\\stray-animal-rescue-system\\\\vue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7d0fff6b\"]])\n\nexport default __exports__"],"names":["style","_createElementVNode","class","_createElementBlock","_createVNode","_component_el_row","_component_el_col","span","undefined","$data","id","_hoisted_4","_toDisplayString","type","_component_el_popconfirm","title","onConfirm","$options","reference","_component_el_button","icon","size","plain","_component_el_input","$event","placeholder","clearable","_Fragment","_renderList","post","index","_createBlock","_component_el_card","shadow","_hoisted_8","_hoisted_9","disabled","_hoisted_11","onClick","offset","src","user","alt","time","innerHTML","content","name","data","animal","posts","postLen","num","newAnimal","Check","Close","created","this","load","methods","async","request","params","isPass","then","res","length","submit","code","$message","message","msg","p","next","delete_post","__exports__","render"],"sourceRoot":""}