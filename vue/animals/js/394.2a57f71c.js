"use strict";(self["webpackChunkstray_animal_rescue_system"]=self["webpackChunkstray_animal_rescue_system"]||[]).push([[394],{1394:function(e,a,s){s.r(a),s.d(a,{default:function(){return g}});var t=s(6252),l=s(3577);const n={style:{padding:"10px"}},i=(0,t.Uk)("查看用户信息"),r=(0,t.Uk)("查看内容"),u={style:{margin:"10px 0"}},o=["innerHTML"];function d(e,a,s,d,p,m){const h=(0,t.up)("el-table-column"),c=(0,t.up)("el-button"),g=(0,t.up)("el-table"),w=(0,t.up)("el-pagination"),_=(0,t.up)("el-form-item"),f=(0,t.up)("el-form"),C=(0,t.up)("el-dialog"),z=(0,t.up)("el-card");return(0,t.wg)(),(0,t.iD)("div",n,[(0,t.Wm)(g,{data:p.tableData,style:{width:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{prop:"id",label:"ID"}),(0,t.Wm)(h,{label:"userID"},{default:(0,t.w5)((e=>[(0,t.Wm)(c,{size:"small",type:"default",plain:"",onClick:a=>m.searchUser(e.row.userId)},{default:(0,t.w5)((()=>[i])),_:2},1032,["onClick"])])),_:1}),(0,t.Wm)(h,{prop:"animalId",label:"animalId"}),(0,t.Wm)(h,{prop:"title",label:"标题"}),(0,t.Wm)(h,{label:"内容"},{default:(0,t.w5)((e=>[(0,t.Wm)(c,{size:"small",onClick:a=>m.details(e.row.content)},{default:(0,t.w5)((()=>[r])),_:2},1032,["onClick"])])),_:1}),(0,t.Wm)(h,{prop:"time",label:"时间"}),(0,t.Wm)(h,{fixed:"right",label:"Operations",width:"120px"},{default:(0,t.w5)((e=>[(0,t.Wm)(c,{type:"success",icon:p.Check,size:"small",plain:"",onClick:a=>m.approved(e.row)},null,8,["icon","onClick"]),(0,t.Wm)(c,{type:"danger",icon:p.Close,size:"small",plain:"",onClick:a=>m.fail(e.row)},null,8,["icon","onClick"])])),_:1})])),_:1},8,["data"]),(0,t._)("div",u,[(0,t.Wm)(w,{currentPage:p.currentPage4,"onUpdate:currentPage":a[0]||(a[0]=e=>p.currentPage4=e),"page-size":p.pageSize4,"onUpdate:page-size":a[1]||(a[1]=e=>p.pageSize4=e),"page-sizes":[5,10,20],layout:"total, sizes, prev, pager, next, jumper",total:p.total,onSizeChange:m.handleSizeChange,onCurrentChange:m.handleCurrentChange},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"])]),(0,t.Wm)(C,{title:"用户信息",modelValue:p.showUser,"onUpdate:modelValue":a[2]||(a[2]=e=>p.showUser=e),width:"30%"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{size:"normal"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t._)("span",null,"用户名："+(0,l.zw)(p.user.username),1)])),_:1}),(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t._)("span",null,"昵称："+(0,l.zw)(p.user.nickName),1)])),_:1}),(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t._)("span",null,"性别："+(0,l.zw)(p.user.sex),1)])),_:1}),(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t._)("span",null,"生日："+(0,l.zw)(p.user.birthday),1)])),_:1}),(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t._)("span",null,"电话号码："+(0,l.zw)(p.user.phoneNum),1)])),_:1}),(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t._)("span",null,"电子邮箱："+(0,l.zw)(p.user.email),1)])),_:1}),(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t._)("span",null,"住址："+(0,l.zw)(p.user.address),1)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(C,{title:"内容",modelValue:p.vis,"onUpdate:modelValue":a[3]||(a[3]=e=>p.vis=e),width:"50%"},{default:(0,t.w5)((()=>[(0,t.Wm)(z,{shadow:"never"},{default:(0,t.w5)((()=>[(0,t._)("div",{innerHTML:p.detail},null,8,o)])),_:1})])),_:1},8,["modelValue"])])}var p=s(4471),m={name:"PostAudit",data(){return{tableData:[],user:{},detail:"",showUser:!1,vis:!1,search:"",currentPage4:1,pageSize4:5,isPass:0,total:1,Check:"Check",Close:"Close"}},created(){this.load()},methods:{load(){p.Z.get("/post",{params:{pageNum:this.currentPage4,pageSize:this.pageSize4,search:this.search,isPass:this.isPass}}).then((e=>{this.tableData=e.data.records,this.total=e.data.total}))},handleSizeChange(){this.load()},handleCurrentChange(){this.load()},async searchUser(e){await p.Z.get("/user/post/"+e).then((e=>{this.user=e.data})),this.showUser=!0},details(e){this.detail=e,this.vis=!0},async approved(e){e.isPass=1,await p.Z.put("/post",e).then((e=>{"0"===e.code?this.$message({type:"success",message:"审核成功"}):this.$message({type:"error",message:e.msg})}));let a={};a.toId=e.userId,a.fromId=1,a.content="您的审核已通过",await p.Z.post("/message",a),this.load()},async fail(e){e.isPass=2,await p.Z.put("/post",e).then((e=>{"0"===e.code?this.$message({type:"success",message:"审核成功"}):this.$message({type:"error",message:e.msg})}));let a={};a.toId=e.userId,a.fromId=1,a.content="您的审核未通过",await p.Z.post("/message",a),this.load()}}},h=s(3744);const c=(0,h.Z)(m,[["render",d]]);var g=c}}]);
//# sourceMappingURL=394.2a57f71c.js.map