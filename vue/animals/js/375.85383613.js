"use strict";(self["webpackChunkstray_animal_rescue_system"]=self["webpackChunkstray_animal_rescue_system"]||[]).push([[375],{375:function(e,o,s){s.r(o),s.d(o,{default:function(){return p}});var r=s(6252);const a={style:{margin:"16px"}},l=(0,r.Uk)(" 登录 ");function n(e,o,s,n,t,u){const m=(0,r.up)("van-field"),i=(0,r.up)("van-picker"),d=(0,r.up)("van-popup"),p=(0,r.up)("van-cell-group"),c=(0,r.up)("van-button"),f=(0,r.up)("van-form"),h=(0,r.up)("van-tab"),w=(0,r.up)("van-tabs");return(0,r.wg)(),(0,r.j4)(w,{active:n.active,"onUpdate:active":o[6]||(o[6]=e=>n.active=e)},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{title:"登录"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{ref:"form",model:n.form,onFailed:n.onFailed,rules:n.rules},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{inset:""},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{modelValue:n.form.username,"onUpdate:modelValue":o[0]||(o[0]=e=>n.form.username=e),name:"username",label:"用户名",placeholder:"用户名"},null,8,["modelValue"]),(0,r.Wm)(m,{modelValue:n.form.password,"onUpdate:modelValue":o[1]||(o[1]=e=>n.form.password=e),name:"password",label:"密码",placeholder:"密码","show-password":""},null,8,["modelValue"]),(0,r.Wm)(m,{modelValue:n.form.userType,"onUpdate:modelValue":o[2]||(o[2]=e=>n.form.userType=e),"is-link":"",readonly:"",label:"用户类型",placeholder:"选择",onClick:o[3]||(o[3]=e=>n.showPicker=!0)},null,8,["modelValue"]),(0,r.Wm)(d,{show:n.showPicker,"onUpdate:show":o[5]||(o[5]=e=>n.showPicker=e),round:"",position:"bottom"},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{columns:n.columns,onCancel:o[4]||(o[4]=e=>n.showPicker=!1),onConfirm:n.onConfirm},null,8,["columns","onConfirm"])])),_:1},8,["show"])])),_:1}),(0,r._)("div",a,[(0,r.Wm)(c,{round:"",block:"",type:"primary","native-type":"submit",onClick:u.login},{default:(0,r.w5)((()=>[l])),_:1},8,["onClick"])])])),_:1},8,["model","onFailed","rules"])])),_:1}),(0,r.Wm)(h,{title:"注册"})])),_:1},8,["active"])}var t=s(4471),u=s(2262),m={name:"Mlogin",setup(){const e=(0,u.iH)(0);let o=(0,u.qj)({username:"",password:"",userType:""});const s=(0,u.qj)({username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),r=[{text:"普通用户",value:"1"},{text:"医疗人员",value:"2"}],a=(0,u.iH)(!1),l=({selectedOptions:e})=>{a.value=!1,o.userType=e[0].text},n=e=>{console.log("failed",e)};return{active:e,form:o,rules:s,columns:r,onConfirm:l,showPicker:a,onFailed:n}},methods:{login(){let e=this;this.$refs["form"].validate((o=>{o&&t.Z.post("/user/login",{username:this.form.username,password:this.form.password,userType:this.form.userType}).then((o=>{"0"===o.code?(this.$message({type:"success",message:"登陆成功"}),t.Z.get("/user/"+e.form.username).then((o=>{e.$store.commit("login",o.data)})),this.$router.push("/")):this.$message({type:"error",message:o.msg})}))}))}}},i=s(3744);const d=(0,i.Z)(m,[["render",n]]);var p=d}}]);
//# sourceMappingURL=375.85383613.js.map