{"version":3,"file":"js/375.85383613.js","mappings":"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","sources":["webpack://stray-animal-rescue-system/./src/views/mobile/Mlogin.vue","webpack://stray-animal-rescue-system/./src/views/mobile/Mlogin.vue?68f6"],"sourcesContent":["<template>\r\n  <van-tabs v-model:active=\"active\">\r\n    <van-tab title=\"登录\">\r\n      <van-form ref=\"form\" :model=\"form\" @failed=\"onFailed\" :rules=\"rules\">\r\n        <van-cell-group inset>\r\n          <!-- 通过 pattern 进行正则校验 -->\r\n          <van-field\r\n              v-model=\"form.username\"\r\n              name=\"username\"\r\n              label=\"用户名\"\r\n              placeholder=\"用户名\"\r\n          />\r\n          <!-- 通过 validator 进行函数校验 -->\r\n          <van-field\r\n              v-model=\"form.password\"\r\n              name=\"password\"\r\n              label=\"密码\"\r\n              placeholder=\"密码\"\r\n              show-password\r\n          />\r\n          <van-field\r\n              v-model=\"form.userType\"\r\n              is-link\r\n              readonly\r\n              label=\"用户类型\"\r\n              placeholder=\"选择\"\r\n              @click=\"showPicker = true\"\r\n          />\r\n          <van-popup v-model:show=\"showPicker\" round position=\"bottom\">\r\n            <van-picker\r\n                :columns=\"columns\"\r\n                @cancel=\"showPicker = false\"\r\n                @confirm=\"onConfirm\"\r\n            />\r\n          </van-popup>\r\n\r\n        </van-cell-group>\r\n\r\n        <div style=\"margin: 16px;\">\r\n          <van-button round block type=\"primary\" native-type=\"submit\" @click=\"login\">\r\n            登录\r\n          </van-button>\r\n        </div>\r\n      </van-form>\r\n\r\n    </van-tab>\r\n    <van-tab title=\"注册\">\r\n\r\n    </van-tab>\r\n  </van-tabs>\r\n\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request\";\r\nimport { ref } from 'vue'\r\nimport { reactive } from 'vue'\r\n\r\nexport default {\r\n  name: \"Mlogin\",\r\n  setup() {\r\n    const active = ref(0);\r\n    let form = reactive({\r\n      username: '',\r\n      password: '',\r\n      userType: '',\r\n    });\r\n    const rules = reactive({\r\n      username: [\r\n        { required: true, message: '请输入用户名', trigger: 'blur' },\r\n      ],\r\n      password: [\r\n        { required: true, message: '请输入密码', trigger: 'blur' },\r\n      ]\r\n    });\r\n    const columns = [\r\n      { text: '普通用户', value: '1' },\r\n      { text: '医疗人员', value: '2' },\r\n    ];\r\n    // const fieldValue = ref('');\r\n    const showPicker = ref(false);\r\n\r\n    const onConfirm = ({ selectedOptions }) => {\r\n      showPicker.value = false;\r\n      form.userType = selectedOptions[0].text;\r\n    };\r\n\r\n    const onFailed = (errorInfo) => {\r\n      console.log('failed', errorInfo);\r\n    };\r\n    return {\r\n      active,\r\n      form,\r\n      rules,\r\n      columns,\r\n      onConfirm,\r\n      showPicker,\r\n      onFailed,\r\n    };\r\n  },\r\n  methods: {\r\n    login() {\r\n      let self = this\r\n\r\n      this.$refs['form'].validate((valid) => {\r\n        if(valid) {\r\n          request.post(\"/user/login\", {\r\n            username: this.form.username,\r\n            password: this.form.password,\r\n            userType: this.form.userType,\r\n          }).then(res => {\r\n            if(res.code === '0') {\r\n              this.$message({\r\n                type: \"success\",\r\n                message: \"登陆成功\",\r\n              })\r\n              request.get(\"/user/\" + self.form.username).then(res => {\r\n                // console.log(res)\r\n                self.$store.commit('login', res.data)\r\n              })\r\n              this.$router.push(\"/\")\r\n              // if(self.form.userType === '1'){\r\n              //   this.$router.push(\"/\")\r\n              // } else {\r\n              //   this.$router.push(\"/im\")\r\n              // }\r\n            } else {\r\n              this.$message({\r\n                type: \"error\",\r\n                message: res.msg\r\n              })\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { render } from \"./Mlogin.vue?vue&type=template&id=27f00235\"\nimport script from \"./Mlogin.vue?vue&type=script&lang=js\"\nexport * from \"./Mlogin.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\竹诺\\\\Desktop\\\\springboot+vue框架\\\\stray-animal-rescue-system\\\\vue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["style","_createBlock","_component_van_tabs","active","$setup","$event","_createVNode","_component_van_tab","title","_component_van_form","ref","model","onFailed","rules","_component_van_cell_group","inset","_component_van_field","username","name","label","placeholder","password","userType","readonly","onClick","_component_van_popup","show","round","position","_component_van_picker","columns","onCancel","onConfirm","_createElementVNode","_component_van_button","block","type","$options","setup","form","reactive","required","message","trigger","text","value","showPicker","selectedOptions","errorInfo","console","log","methods","login","self","this","$refs","validate","valid","request","then","res","code","$message","$store","commit","data","$router","push","msg","__exports__","render"],"sourceRoot":""}