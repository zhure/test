"use strict";(self["webpackChunkstray_animal_rescue_system"]=self["webpackChunkstray_animal_rescue_system"]||[]).push([[130],{2130:function(e,a,t){t.r(a),t.d(a,{default:function(){return C}});var l=t(6252),s=t(9963),n=t(3577);const r={style:{padding:"10px"}},i={style:{margin:"10px 0"}},u=(0,l.Uk)("查询"),d=(0,l.Uk)("查看用户信息"),o=(0,l.Uk)("已领养，查看后续"),p={style:{margin:"10px 0"}},m=["src"],h={style:{"margin-left":"10px"}},c={class:"nick"},w={class:"time"},g=["innerHTML"];function _(e,a,t,_,f,y){const W=(0,l.up)("el-option"),z=(0,l.up)("el-select"),C=(0,l.up)("el-button"),k=(0,l.up)("el-table-column"),v=(0,l.up)("el-image"),b=(0,l.up)("el-table"),L=(0,l.up)("el-pagination"),U=(0,l.up)("el-form-item"),P=(0,l.up)("el-form"),x=(0,l.up)("el-dialog"),S=(0,l.up)("el-col"),V=(0,l.up)("el-row"),A=(0,l.up)("el-card");return(0,l.wg)(),(0,l.iD)("div",r,[(0,l._)("div",i,[(0,l.Wm)(z,{modelValue:f.search,"onUpdate:modelValue":a[0]||(a[0]=e=>f.search=e),class:"m-2",placeholder:"Select"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(f.animals,(e=>((0,l.wg)(),(0,l.j4)(W,{key:e.id,label:e.type,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,l.Wm)(C,{type:"primary",style:{"margin-left":"5px"},onClick:y.load},{default:(0,l.w5)((()=>[u])),_:1},8,["onClick"])]),(0,l.Wm)(b,{data:f.tableData,style:{width:"100%"}},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{prop:"id",label:"ID"}),(0,l.Wm)(k,{label:"userID"},{default:(0,l.w5)((e=>[(0,l.Wm)(C,{size:"small",type:"default",plain:"",onClick:a=>y.searchUser(e.row.userId)},{default:(0,l.w5)((()=>[d])),_:2},1032,["onClick"])])),_:1}),(0,l.Wm)(k,{prop:"name",label:"名字"}),(0,l.Wm)(k,{prop:"address",label:"地址"}),(0,l.Wm)(k,{prop:"detail",label:"描述"}),(0,l.Wm)(k,{label:"图片"},{default:(0,l.w5)((e=>[(0,l.Wm)(v,{"preview-teleported":"true",style:{width:"100px",height:"100px"},src:e.row.img,"preview-src-list":[e.row.img],fit:"cover"},null,8,["src","preview-src-list"])])),_:1}),(0,l.Wm)(k,{fixed:"right",label:"Operations",width:"150px"},{default:(0,l.w5)((e=>[(0,l.wy)((0,l.Wm)(C,{onClick:a=>y.getAdoptLater(e.row.id)},{default:(0,l.w5)((()=>[o])),_:2},1032,["onClick"]),[[s.F8,1===e.row.isAdopt]]),(0,l.wy)((0,l._)("span",null,"未领养",512),[[s.F8,0===e.row.isAdopt]])])),_:1})])),_:1},8,["data"]),(0,l._)("div",p,[(0,l.Wm)(L,{currentPage:f.currentPage4,"onUpdate:currentPage":a[1]||(a[1]=e=>f.currentPage4=e),"page-size":f.pageSize4,"onUpdate:page-size":a[2]||(a[2]=e=>f.pageSize4=e),"page-sizes":[5,10,20],layout:"total, sizes, prev, pager, next, jumper",total:f.total,onSizeChange:y.handleSizeChange,onCurrentChange:y.handleCurrentChange},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"])]),(0,l.Wm)(x,{title:"用户信息",modelValue:f.showUser,"onUpdate:modelValue":a[3]||(a[3]=e=>f.showUser=e),width:"30%"},{default:(0,l.w5)((()=>[(0,l.Wm)(P,{size:"normal"},{default:(0,l.w5)((()=>[(0,l.Wm)(U,null,{default:(0,l.w5)((()=>[(0,l._)("span",null,"用户名："+(0,n.zw)(f.user.username),1)])),_:1}),(0,l.Wm)(U,null,{default:(0,l.w5)((()=>[(0,l._)("span",null,"昵称："+(0,n.zw)(f.user.nickName),1)])),_:1}),(0,l.Wm)(U,null,{default:(0,l.w5)((()=>[(0,l._)("span",null,"性别："+(0,n.zw)(f.user.sex),1)])),_:1}),(0,l.Wm)(U,null,{default:(0,l.w5)((()=>[(0,l._)("span",null,"生日："+(0,n.zw)(f.user.birthday),1)])),_:1}),(0,l.Wm)(U,null,{default:(0,l.w5)((()=>[(0,l._)("span",null,"电话号码："+(0,n.zw)(f.user.phoneNum),1)])),_:1}),(0,l.Wm)(U,null,{default:(0,l.w5)((()=>[(0,l._)("span",null,"电子邮箱："+(0,n.zw)(f.user.email),1)])),_:1}),(0,l.Wm)(U,null,{default:(0,l.w5)((()=>[(0,l._)("span",null,"住址："+(0,n.zw)(f.user.address),1)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(x,{title:"领养后续",modelValue:f.showLater,"onUpdate:modelValue":a[4]||(a[4]=e=>f.showLater=e),width:"60%"},{default:(0,l.w5)((()=>[(0,l.Wm)(A,{shadow:"never"},{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Wm)(S,{span:2,offset:1},{default:(0,l.w5)((()=>[(0,l._)("img",{class:"avatar",src:f.adoptLater.user["headImg"],alt:"头像"},null,8,m)])),_:1}),(0,l.Wm)(S,{span:19},{default:(0,l.w5)((()=>[(0,l._)("div",h,[(0,l._)("span",c,(0,n.zw)(f.adoptLater.user["nickName"]),1),(0,l._)("span",w,(0,n.zw)(f.adoptLater.time),1)])])),_:1})])),_:1}),(0,l._)("div",{innerHTML:f.adoptLater.content},null,8,g)])),_:1})])),_:1},8,["modelValue"])])}var f=t(4471),y={name:"AdoptManage",data(){return{tableData:[],animals:[],user:{},adoptLater:{},showUser:!1,showLater:!1,search:"",currentPage4:1,pageSize4:5,isPass:1,total:1,Check:"Check",Close:"Close"}},created(){this.getAnimal(),this.load()},methods:{async getAdoptLater(e){await f.Z.get("/adopt_later/"+e).then((e=>{this.adoptLater=e.data})),this.showLater=!0},async getAnimal(){await f.Z.get("animal",this.isPass).then((e=>{this.animals=e.data}))},load(){f.Z.get("/adoption",{params:{pageNum:this.currentPage4,pageSize:this.pageSize4,search:this.search,isPass:this.isPass}}).then((e=>{this.tableData=e.data.records,this.total=e.data.total}))},handleSizeChange(){this.load()},handleCurrentChange(){this.load()},async searchUser(e){await f.Z.get("/user/post/"+e).then((e=>{this.user=e.data})),this.showUser=!0},async approved(e){e.isPass=1,await f.Z.put("/adoption",e).then((e=>{"0"===e.code?this.$message({type:"success",message:"审核成功"}):this.$message({type:"error",message:e.msg})})),this.load()},async fail(e){e.isPass=2,await f.Z.put("/adoption",e).then((e=>{"0"===e.code?this.$message({type:"success",message:"审核成功"}):this.$message({type:"error",message:e.msg})})),this.load()}}},W=t(3744);const z=(0,W.Z)(y,[["render",_],["__scopeId","data-v-e4717730"]]);var C=z}}]);
//# sourceMappingURL=130.0a7d0892.js.map