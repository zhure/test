"use strict";(self["webpackChunkstray_animal_rescue_system"]=self["webpackChunkstray_animal_rescue_system"]||[]).push([[2],{9002:function(e,a,l){l.r(a),l.d(a,{default:function(){return g}});var t=l(6252),s=l(3577);const n={style:{padding:"10px"}},i={style:{margin:"10px 0"}},r=(0,t.Uk)("查询"),u=(0,t.Uk)("查看用户信息"),o={style:{margin:"10px 0"}};function d(e,a,l,d,p,m){const c=(0,t.up)("el-option"),h=(0,t.up)("el-select"),g=(0,t.up)("el-button"),w=(0,t.up)("el-table-column"),f=(0,t.up)("el-image"),_=(0,t.up)("el-table"),C=(0,t.up)("el-pagination"),y=(0,t.up)("el-form-item"),z=(0,t.up)("el-form"),W=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.iD)("div",n,[(0,t._)("div",i,[(0,t.Wm)(h,{modelValue:p.search,"onUpdate:modelValue":a[0]||(a[0]=e=>p.search=e),class:"m-2",placeholder:"Select",clearable:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(p.animals,(e=>((0,t.wg)(),(0,t.j4)(c,{key:e.id,label:e.type,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,t.Wm)(g,{type:"primary",style:{"margin-left":"5px"},onClick:m.load},{default:(0,t.w5)((()=>[r])),_:1},8,["onClick"])]),(0,t.Wm)(_,{data:p.tableData,style:{width:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{prop:"id",label:"ID"}),(0,t.Wm)(w,{label:"userID"},{default:(0,t.w5)((e=>[(0,t.Wm)(g,{size:"small",type:"default",plain:"",onClick:a=>m.searchUser(e.row.userId)},{default:(0,t.w5)((()=>[u])),_:2},1032,["onClick"])])),_:1}),(0,t.Wm)(w,{prop:"name",label:"名字"}),(0,t.Wm)(w,{prop:"address",label:"地址"}),(0,t.Wm)(w,{prop:"detail",label:"描述"}),(0,t.Wm)(w,{label:"图片"},{default:(0,t.w5)((e=>[(0,t.Wm)(f,{"preview-teleported":"true",style:{width:"100px",height:"100px"},src:e.row.img,"preview-src-list":[e.row.img],fit:"cover"},null,8,["src","preview-src-list"])])),_:1}),(0,t.Wm)(w,{fixed:"right",label:"Operations",width:"120px"},{default:(0,t.w5)((e=>[(0,t.Wm)(g,{type:"success",icon:p.Check,size:"small",plain:"",onClick:a=>m.approved(e.row)},null,8,["icon","onClick"]),(0,t.Wm)(g,{type:"danger",icon:p.Close,size:"small",plain:"",onClick:a=>m.fail(e.row)},null,8,["icon","onClick"])])),_:1})])),_:1},8,["data"]),(0,t._)("div",o,[(0,t.Wm)(C,{currentPage:p.currentPage4,"onUpdate:currentPage":a[1]||(a[1]=e=>p.currentPage4=e),"page-size":p.pageSize4,"onUpdate:page-size":a[2]||(a[2]=e=>p.pageSize4=e),"page-sizes":[5,10,20],layout:"total, sizes, prev, pager, next, jumper",total:p.total,onSizeChange:m.handleSizeChange,onCurrentChange:m.handleCurrentChange},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"])]),(0,t.Wm)(W,{title:"用户信息",modelValue:p.showUser,"onUpdate:modelValue":a[3]||(a[3]=e=>p.showUser=e),width:"30%"},{default:(0,t.w5)((()=>[(0,t.Wm)(z,{size:"normal"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t._)("span",null,"用户名："+(0,s.zw)(p.user.username),1)])),_:1}),(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t._)("span",null,"昵称："+(0,s.zw)(p.user.nickName),1)])),_:1}),(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t._)("span",null,"性别："+(0,s.zw)(p.user.sex),1)])),_:1}),(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t._)("span",null,"生日："+(0,s.zw)(p.user.birthday),1)])),_:1}),(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t._)("span",null,"电话号码："+(0,s.zw)(p.user.phoneNum),1)])),_:1}),(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t._)("span",null,"电子邮箱："+(0,s.zw)(p.user.email),1)])),_:1}),(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t._)("span",null,"住址："+(0,s.zw)(p.user.address),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var p=l(4471),m={name:"AdoptAudit",data(){return{tableData:[],animals:[],user:{},showUser:!1,search:"",currentPage4:1,pageSize4:5,isPass:0,total:1,Check:"Check",Close:"Close"}},created(){this.getAnimal(),this.load()},methods:{async getAnimal(){await p.Z.get("animal",this.isPass).then((e=>{this.animals=e.data}))},load(){p.Z.get("/adoption",{params:{pageNum:this.currentPage4,pageSize:this.pageSize4,search:this.search,isPass:this.isPass}}).then((e=>{this.tableData=e.data.records,this.total=e.data.total}))},handleSizeChange(){this.load()},handleCurrentChange(){this.load()},async searchUser(e){await p.Z.get("/user/post/"+e).then((e=>{this.user=e.data})),this.showUser=!0},async approved(e){e.isPass=1,await p.Z.put("/adoption",e).then((e=>{"0"===e.code?this.$message({type:"success",message:"审核成功"}):this.$message({type:"error",message:e.msg})}));let a={};a.toId=e.userId,a.fromId=1,a.content="您的"+e.title+"审核已通过",await p.Z.post("/message",a),this.load()},async fail(e){e.isPass=2,await p.Z.put("/adoption",e).then((e=>{"0"===e.code?this.$message({type:"success",message:"审核成功"}):this.$message({type:"error",message:e.msg})}));let a={};a.toId=e.userId,a.fromId=1,a.content="您的"+e.title+"审核未通过",await p.Z.post("/message",a),this.load()}}},c=l(3744);const h=(0,c.Z)(m,[["render",d]]);var g=h}}]);
//# sourceMappingURL=2.c703772d.js.map